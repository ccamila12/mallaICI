<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Malla Curricular Horizontal</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #fff5fc;
    margin: 2rem;
  }
  h1 {
    color: #d03d7f;
    text-align: center;
    margin-bottom: 1.5rem;
  }
  #malla-container {
    display: flex;
    gap: 1.5rem;
    overflow-x: auto;
  }
  .nivel-col {
    background: #f8e8f3;
    padding: 1rem;
    border-radius: 8px;
    min-width: 150px;
    flex-shrink: 0;
  }
  .nivel-col h2 {
    color: #a0537d;
    margin-top: 0;
    margin-bottom: 1rem;
    font-weight: 700;
    text-align: center;
  }
  .ramo {
    padding: 0.4rem 0.6rem;
    margin-bottom: 0.4rem;
    border-radius: 4px;
    cursor: pointer;
    user-select: none;
    color: #4a2e47;
  }
  .ramo.FB { background-color: #f8c6d8; }
  .ramo.FD { background-color: #e3b7e7; }
  .ramo.FF { background-color: #d49dde; }
  .ramo.FC { background-color: #d1c1d8; }
  .ramo.MI { background-color: #bfa5c9; }
  .ramo.DC { background-color: #c1b3d7; }
  .ramo.EE { background-color: #d2addd; }

  .ramo.tachado {
    text-decoration: line-through;
    background-color: rgba(208, 61, 127, 0.3) !important;
    color: #7a4a6e !important;
  }

  .ramo.bloqueado {
    background-color: #ccc !important;
    color: #777 !important;
    pointer-events: none;
  }

  .ramo:hover:not(.bloqueado):not(.tachado) {
    background-color: #f0d5e6;
  }
</style>
</head>
<body>

<h1>Malla Curricular Horizontal</h1>

<div id="malla-container">
  <div class="nivel-col" data-nivel="1">
    <h2>Nivel 1</h2>
    <div class="ramo FB" data-nombre="CALCULO I" data-prerrequisito="">CALCULO I</div>
    <div class="ramo FB" data-nombre="ALGEBRA" data-prerrequisito="">ALGEBRA</div>
    <div class="ramo FB" data-nombre="QUIMICA GENERAL Y ORGANICA" data-prerrequisito="">QUIMICA GENERAL Y ORGANICA</div>
    <div class="ramo FD" data-nombre="LA INGENIERIA INDUSTRIAL" data-prerrequisito="">LA INGENIERIA INDUSTRIAL</div>
    <div class="ramo FF" data-nombre="COMUNICACION ORAL Y ESCRITA I" data-prerrequisito="">COMUNICACION ORAL Y ESCRITA I</div>
    <div class="ramo FF" data-nombre="IDIOMA EXTRANJERO I" data-prerrequisito="">IDIOMA EXTRANJERO I</div>
  </div>

  <div class="nivel-col" data-nivel="2">
    <h2>Nivel 2</h2>
    <div class="ramo FB" data-nombre="CALCULO II" data-prerrequisito="CALCULO I">CALCULO II</div>
    <div class="ramo FB" data-nombre="ALGEBRA LINEAL" data-prerrequisito="ALGEBRA">ALGEBRA LINEAL</div>
    <div class="ramo FD" data-nombre="SOLUCION ALGORITMICA DE PROBLEMAS" data-prerrequisito="">SOLUCION ALGORITMICA DE PROBLEMAS</div>
    <div class="ramo FD" data-nombre="FUNDAMENTOS DE ADMINISTRACION" data-prerrequisito="LA INGENIERIA INDUSTRIAL">FUNDAMENTOS DE ADMINISTRACION</div>
    <div class="ramo FF" data-nombre="COMUNICACION ORAL Y ESCRITA II" data-prerrequisito="COMUNICACION ORAL Y ESCRITA I">COMUNICACION ORAL Y ESCRITA II</div>
    <div class="ramo FF" data-nombre="IDIOMA EXTRANJERO II" data-prerrequisito="IDIOMA EXTRANJERO I">IDIOMA EXTRANJERO II</div>
    <div class="ramo FC" data-nombre="DEPORTE I" data-prerrequisito="">DEPORTE I</div>
  </div>

  <!-- Más niveles aquí -->
</div>

<script>
  function estaTachado(el) {
    return el.classList.contains('tachado');
  }

  document.querySelectorAll('.ramo').forEach(el => {
    el.addEventListener('click', () => {
      if (el.classList.contains('bloqueado')) return;
      el.classList.toggle('tachado');
      actualizarEstadoRamos();
    });
  });

  function actualizarEstadoRamos() {
    const aprobados = new Set();
    document.querySelectorAll('.ramo.tachado').forEach(el => {
      aprobados.add(el.dataset.nombre.trim().toUpperCase());
    });

    document.querySelectorAll('.ramo').forEach(el => {
      if (estaTachado(el)) {
        el.classList.remove('bloqueado');
        return;
      }
      const prereqs = el.dataset.prerrequisito;
      if (!prereqs || prereqs.trim() === '') {
        el.classList.remove('bloqueado');
      } else {
        const prereqArray = prereqs.split(',').map(x => x.trim().toUpperCase());
        const todosAprobados = prereqArray.every(p => aprobados.has(p));
        if (todosAprobados) {
          el.classList.remove('bloqueado');
        } else {
          el.classList.add('bloqueado');
          el.classList.remove('tachado');
        }
      }
    });
  }

  actualizarEstadoRamos();
</script>

</body>
</html>
