<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Malla Curricular Interactiva Simplificada</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #fff5fc;
    margin: 2rem;
  }
  h1 {
    color: #d03d7f;
    text-align: center;
    margin-bottom: 1.5rem;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
  }
  th, td {
    padding: 0.4rem 0.8rem;
    border: none;
  }
  th {
    text-align: left;
    color: #d03d7f;
    font-weight: 700;
    font-size: 1.1rem;
  }
  td.nivel {
    width: 50px;
    text-align: left;
    font-weight: 600;
    color: #a0537d;
    vertical-align: top;
    user-select: none;
  }
  td.ramo {
    cursor: pointer;
    transition: background-color 0.3s ease;
    text-align: left;
    padding-left: 0.5rem;
    border-radius: 4px;
    user-select: none;
    white-space: normal;
    word-wrap: break-word;
  }
  td.ramo.FB { background-color: #f8c6d8; }
  td.ramo.FD { background-color: #e3b7e7; }
  td.ramo.FF { background-color: #d49dde; }
  td.ramo.FC { background-color: #d1c1d8; }
  td.ramo.MI { background-color: #bfa5c9; }
  td.ramo.DC { background-color: #c1b3d7; }
  td.ramo.EE { background-color: #d2addd; }

  td.ramo.tachado {
    text-decoration: line-through;
    background-color: rgba(208, 61, 127, 0.3) !important;
    color: #7a4a6e !important;
  }

  td.ramo.bloqueado {
    background-color: #ccc !important;
    color: #777 !important;
    pointer-events: none;
    user-select: none;
  }

  td.ramo:hover:not(.bloqueado):not(.tachado) {
    background-color: #f0d5e6;
  }
</style>
</head>
<body>

<h1>Malla Curricular Interactiva</h1>

<table id="malla">
  <thead>
    <tr>
      <th>Nivel</th>
      <th>Asignatura</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="nivel">1</td>
      <td class="ramo FB" data-nombre="CALCULO I" data-prerrequisito="">CALCULO I</td>
    </tr>
    <tr>
      <td class="nivel">1</td>
      <td class="ramo FB" data-nombre="ALGEBRA" data-prerrequisito="">ALGEBRA</td>
    </tr>
    <tr>
      <td class="nivel">1</td>
      <td class="ramo FB" data-nombre="QUIMICA GENERAL Y ORGANICA" data-prerrequisito="">QUIMICA GENERAL Y ORGANICA</td>
    </tr>
    <tr>
      <td class="nivel">1</td>
      <td class="ramo FD" data-nombre="LA INGENIERIA INDUSTRIAL" data-prerrequisito="">LA INGENIERIA INDUSTRIAL</td>
    </tr>
    <tr>
      <td class="nivel">1</td>
      <td class="ramo FF" data-nombre="COMUNICACION ORAL Y ESCRITA I" data-prerrequisito="">COMUNICACION ORAL Y ESCRITA I</td>
    </tr>
    <tr>
      <td class="nivel">1</td>
      <td class="ramo FF" data-nombre="IDIOMA EXTRANJERO I" data-prerrequisito="">IDIOMA EXTRANJERO I</td>
    </tr>

    <tr>
      <td class="nivel">2</td>
      <td class="ramo FB" data-nombre="CALCULO II" data-prerrequisito="CALCULO I">CALCULO II</td>
    </tr>
    <tr>
      <td class="nivel">2</td>
      <td class="ramo FB" data-nombre="ALGEBRA LINEAL" data-prerrequisito="ALGEBRA">ALGEBRA LINEAL</td>
    </tr>
    <tr>
      <td class="nivel">2</td>
      <td class="ramo FD" data-nombre="SOLUCION ALGORITMICA DE PROBLEMAS" data-prerrequisito="">SOLUCION ALGORITMICA DE PROBLEMAS</td>
    </tr>
    <tr>
      <td class="nivel">2</td>
      <td class="ramo FD" data-nombre="FUNDAMENTOS DE ADMINISTRACION" data-prerrequisito="LA INGENIERIA INDUSTRIAL">FUNDAMENTOS DE ADMINISTRACION</td>
    </tr>
    <tr>
      <td class="nivel">2</td>
      <td class="ramo FF" data-nombre="COMUNICACION ORAL Y ESCRITA II" data-prerrequisito="COMUNICACION ORAL Y ESCRITA I">COMUNICACION ORAL Y ESCRITA II</td>
    </tr>
    <tr>
      <td class="nivel">2</td>
      <td class="ramo FF" data-nombre="IDIOMA EXTRANJERO II" data-prerrequisito="IDIOMA EXTRANJERO I">IDIOMA EXTRANJERO II</td>
    </tr>
    <tr>
      <td class="nivel">2</td>
      <td class="ramo FC" data-nombre="DEPORTE I" data-prerrequisito="">DEPORTE I</td>
    </tr>

    <!-- Agrega más filas siguiendo este patrón -->
  </tbody>
</table>

<script>
  function estaTachado(td) {
    return td.classList.contains('tachado');
  }

  document.querySelectorAll('td.ramo').forEach(td => {
    td.addEventListener('click', () => {
      if (td.classList.contains('bloqueado')) return;

      td.classList.toggle('tachado');
      actualizarEstadoRamos();
    });
  });

  function actualizarEstadoRamos() {
    const aprobados = new Set();
    document.querySelectorAll('td.ramo.tachado').forEach(td => {
      aprobados.add(td.dataset.nombre.trim().toUpperCase());
    });

    document.querySelectorAll('td.ramo').forEach(td => {
      if (estaTachado(td)) {
        td.classList.remove('bloqueado');
        return;
      }
      const prereqs = td.dataset.prerrequisito;
      if (!prereqs || prereqs.trim() === '') {
        td.classList.remove('bloqueado');
      } else {
        const prereqArray = prereqs.split(',').map(x => x.trim().toUpperCase());
        const todosAprobados = prereqArray.every(p => aprobados.has(p));
        if (todosAprobados) {
          td.classList.remove('bloqueado');
        } else {
          td.classList.add('bloqueado');
          td.classList.remove('tachado');
        }
      }
    });
  }

  actualizarEstadoRamos();
</script>

</body>
</html>
